# ─────────────────────────────────────────────────────────────────────
#  CyberShield Lite — Backend Environment File
#  Copy to .env and fill in your values.
# ─────────────────────────────────────────────────────────────────────

# ── Server ────────────────────────────────────────────────────────────
PORT=5000

# REQUIRED in production — without this:
#   • Logs stay in dev (pretty) mode instead of JSON
#   • Stack traces may leak in error responses
#   • File log rotation is disabled
#   • The server will warn loudly if MONGO_URI points to Atlas and this is missing
NODE_ENV=development

# ── MongoDB ───────────────────────────────────────────────────────────
# Local:       mongodb://localhost:27017/cybershield
# D drive:     mongodb://localhost:27017/cybershield   (change data dir during install)
# Atlas (prod): mongodb+srv://user:pass@cluster.mongodb.net/cybershield
MONGO_URI=mongodb://localhost:27017/cybershield

# ── JWT ───────────────────────────────────────────────────────────────
# REQUIRED. Generate with:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=replace_this_with_a_long_random_secret
JWT_EXPIRES_IN=7d

# ── Services ──────────────────────────────────────────────────────────
# Python scanner must be running before scans work
# Local:  http://localhost:8000
# Docker: http://scanner:8000  (set automatically in docker-compose)
# Prod:   https://scanner.yourdomain.com
SCANNER_SERVICE_URL=http://localhost:8000

# CORS — your deployed frontend URL
# Local:  http://localhost:3000
# Prod:   https://app.cybershield.in
# ⚠ In production, server will EXIT if this is still set to localhost
CLIENT_URL=http://localhost:3000

# ── Rate Limiting ─────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
SCAN_RATE_LIMIT_MAX=10

# ── Free Tier ─────────────────────────────────────────────────────────
# Monthly scan cap per user (set high or remove for internal use)
SCAN_MONTHLY_LIMIT=5

# ── Logging ───────────────────────────────────────────────────────────
LOG_LEVEL=info

# ── Billing (future — Razorpay) ───────────────────────────────────────
# Uncomment when wiring up payments
# RAZORPAY_KEY_ID=rzp_live_xxxx
# RAZORPAY_KEY_SECRET=xxxx
# RAZORPAY_WEBHOOK_SECRET=xxxx
